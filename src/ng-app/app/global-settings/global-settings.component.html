<!--
Copyright (c) 2019-2023 TUXEDO Computers GmbH <tux@tuxedocomputers.com>

This file is part of TUXEDO Control Center.

TUXEDO Control Center is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

TUXEDO Control Center is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with TUXEDO Control Center.  If not, see <https://www.gnu.org/licenses/>.
-->
<div class="global-settings">
    <div class="inner-global-settings">

        <mat-card class="tcc-card card-global-settings">
            <mat-card-title class="theme-page-title">
                <ng-container i18n="@@cGlobalSettingsTitle">Settings</ng-container>
            </mat-card-title>
            <hr />
            <div class="content-container centered">
                <p i18n="@@cGlobalSettingsDescription">
                    The settings area contains GUI settings and settings that affects all profiles.
                </p>
            </div>
        </mat-card>

        <mat-accordion class="tcc-accordion">
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        <mat-icon>
                            <svg viewBox="0 0 512 512">
                                <use href="./assets/images/icon_settings.svg#Icon"></use>
                            </svg>
                        </mat-icon>
                        <ng-container i18n="@@cGlobalSettingsGlobalProfileSettingsTitle">Global profile
                            settings</ng-container>
                    </mat-panel-title>
                </mat-expansion-panel-header>

                <div class="content">

                    <mat-grid-list [cols]="gridParams.cols" rowHeight="3em" class="global-settings-grid">
                        <mat-grid-tile [colspan]="gridParams.headerSpan">
                            <header i18n="@@cGlobalSettingsTemperatureDisplayHeader">Temperature Display</header>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="gridParams.valueSpan">
                            <content class="value">
                                <span [hidden]="temperatureDisplayFahrenheit"
                                    i18n="@@cGlobalSettingsTemperatureDisplayActivated">Celsius</span>
                                <span [hidden]="!temperatureDisplayFahrenheit"
                                    i18n="@@cGlobalSettingsTemperatureDisplayDeactivated">Fahrenheit</span>
                            </content>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="gridParams.inputSpan">
                            <content class="input">
                                <mat-button-toggle #inputTemperatureDisplaySettings color="primary"
                                    (change)="onTemperatureDisplayChanged(!temperatureDisplayFahrenheit)" [value]="!temperatureDisplayFahrenheit">
                                    <span [hidden]="!temperatureDisplayFahrenheit"
                                    i18n="@@cGlobalSettingsTemperatureDisplayActivated">Celsius</span>
                                <span [hidden]="temperatureDisplayFahrenheit"
                                    i18n="@@cGlobalSettingsTemperatureDisplayDeactivated">Fahrenheit</span>
                                </mat-button-toggle>
                            </content>
                        </mat-grid-tile>
                    </mat-grid-list>
                    <div class=margin-bottom i18n="@@cGlobalSettingsTemperatureDisplayDescription">Switch between Celsius and Fahrenheit
                    </div>


                    <mat-grid-list [cols]="gridParams.cols" rowHeight="3em" class="global-settings-grid">
                        <mat-grid-tile [colspan]="gridParams.headerSpan">
                            <header i18n="@@cGlobalSettingsCpuFrequencyHeader">CPU Frequency Control</header>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="gridParams.valueSpan">
                            <content class="value">
                                <span [hidden]="!inputCPUSettings.checked"
                                    i18n="@@cGlobalSettingsCpuFrequencyActivated">activated</span>
                                <span [hidden]="inputCPUSettings.checked"
                                    i18n="@@cGlobalSettingsCpuFrequencyDeactivated">deactivated</span>
                            </content>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="gridParams.inputSpan">
                            <content class="input">
                                <mat-checkbox #inputCPUSettings color="primary" [(ngModel)]="cpuSettingsEnabled"
                                    (change)="onCPUSettingsEnabledChanged($event)">
                                </mat-checkbox>
                            </content>
                        </mat-grid-tile>
                    </mat-grid-list>
                    <div class=margin-bottom i18n="@@cGlobalSettingsCpuFrequencyDescription">On deactivate, CPU
                        frequency
                        control is <strong>not</strong> reset to default. Default settings need to be restored by hand
                        or a
                        system reboot.
                    </div>

                    <mat-grid-list [cols]="gridParams.cols" rowHeight="3em" class="global-settings-grid">
                        <mat-grid-tile [colspan]="gridParams.headerSpan">
                            <header i18n="@@cGlobalSettingsFanControlHeader">Fan Control</header>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="gridParams.valueSpan">
                            <content class="value">
                                <span [hidden]="!inputFanControl.checked"
                                    i18n="@@cGlobalSettingsFanControlActivated">activated</span>
                                <span [hidden]="inputFanControl.checked"
                                    i18n="@@cGlobalSettingsFanControlDeactivated">deactivated</span>
                            </content>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="gridParams.inputSpan">
                            <content class="input">
                                <mat-checkbox #inputFanControl color="primary" [(ngModel)]="fanControlEnabled"
                                    (change)="onFanControlEnabledChanged($event)">
                                </mat-checkbox>
                            </content>
                        </mat-grid-tile>
                    </mat-grid-list>
                    <div class=margin-bottom i18n="@@cGlobalSettingsFanControlDescription">On deactivate, the default
                        automatic
                        fan control is restored
                        directly.</div>

                    <mat-grid-list [cols]="gridParams.cols" rowHeight="3em" class="global-settings-grid">
                        <mat-grid-tile [colspan]="gridParams.headerSpan">
                            <header i18n="@@cGlobalSettingsKeyboardBacklightHeader">Keyboard Backlight Control</header>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="gridParams.valueSpan">
                            <content class="value">
                                <span [hidden]="!inputKeyboardBacklightControl.checked"
                                    i18n="@@cGlobalSettingsKeyboardBacklightActivated">activated</span>
                                <span [hidden]="inputKeyboardBacklightControl.checked"
                                    i18n="@@cGlobalSettingsKeyboardBacklightDeactivated">deactivated</span>
                            </content>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="gridParams.inputSpan">
                            <content class="input">
                                <mat-checkbox #inputKeyboardBacklightControl color="primary"
                                    [(ngModel)]="keyboardBacklightControlEnabled"
                                    (change)="onKeyboardBacklightControlEnabledChanged($event)">
                                </mat-checkbox>
                            </content>
                        </mat-grid-tile>
                    </mat-grid-list>
                    <div i18n="@@cGlobalSettingsKeyboardBacklightDescription">On deactivate, keyboard backlight settings
                        are <strong>not</strong> reset to default.
                        Default
                        settings need to be restored by hand or a system reboot.
                    </div>
                </div>
            </mat-expansion-panel>

            <mat-expansion-panel *ngIf="forceYUV420OutputSwitchAvailable">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        <mat-icon>
                            <svg viewBox="0 0 512 512">
                                <use href="./assets/images/icon_gear.svg#Icon"></use>
                            </svg>
                        </mat-icon>
                        <ng-container i18n="@@cGlobalSettingsChromaSubsamplingHeader">Chroma subsampling</ng-container>
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <div class="content">
                    <div [hidden]=!forceYUV420OutputSwitchAvailable>
                        <header class=margin-top i18n="@@cGlobalSettingsChromaSubsamplingDescriptionHeader">Force Chroma
                            Subsampling
                            (Y'CbCr 4:2:0) if available:</header>
                        <!--Long form of ngFor, because short form can't be used without adding a HTML element-->
                        <ng-template ngFor let-card [ngForOf]="ycbcr420Workaround" let-i="index">
                            <mat-grid-list *ngFor="let port of Object.keys(card)" [cols]="gridParams.cols"
                                rowHeight="3em" class="global-settings-grid">
                                <mat-grid-tile class=margin-left [colspan]="gridParams.headerSpan">
                                    <header i18n="@@cGlobalSettingsChromaSubsamplingYCbCr420WorkaroundLabel">Port
                                        {{port}} of
                                        Card {{i}}
                                    </header>
                                </mat-grid-tile>
                                <mat-grid-tile [colspan]="gridParams.valueSpan">
                                    <content class="value">
                                        <span [hidden]="!inputYCbCr420Workaround.checked"
                                            i18n="@@cGlobalSettingsChromaSubsamplingYCbCr420WorkaroundActivated">activated</span>
                                        <span [hidden]="inputYCbCr420Workaround.checked"
                                            i18n="@@cGlobalSettingsChromaSubsamplingYCbCr420WorkaroundDeactivated">deactivated</span>
                                    </content>
                                </mat-grid-tile>
                                <mat-grid-tile [colspan]="gridParams.inputSpan">
                                    <content class="input">
                                        <mat-checkbox #inputYCbCr420Workaround color="primary"
                                            [(ngModel)]="ycbcr420Workaround[i][port]"
                                            (change)="onYCbCr420WorkaroundChanged($event, i, port)">
                                        </mat-checkbox>
                                    </content>
                                </mat-grid-tile>
                            </mat-grid-list>
                        </ng-template>
                        <div i18n="@@cGlobalSettingsChromaSubsamplingDescription">This setting might fix flickering on
                            4k@60Hz
                            with certain HDMI cables. It does so by using a lossy compression to reduce the datarate
                            over the
                            cable To ensure that the setting gets applied you need to unplug and replug the monitor or
                            restart
                            your computer. On some devices the HDMI ports are also named DisplayPort or DP internally
                            and are
                            therefore listed as such here.</div>
                    </div>
                </div>
            </mat-expansion-panel>

            <mat-expansion-panel [ngClass]="{'hide': !hasChargingSettings}">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        <mat-icon>
                            <svg viewBox="0 0 512 512">
                                <use href="./assets/images/icon_batterycharger.svg#Icon"></use>
                            </svg>
                        </mat-icon>
                        <ng-container i18n="@@cGlobalSettingsBatteryChargingTitle">Battery charging
                            options</ng-container>
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <div class="content">
                    <app-charging-settings (hasFeature)="hasChargingSettings = $event"></app-charging-settings>
                </div>
            </mat-expansion-panel>

            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        <mat-icon>
                            <svg viewBox="0 0 512 512">
                                <use href="./assets/images/icon_theme.svg#Icon"></use>
                            </svg>
                        </mat-icon>
                        <ng-container i18n="@@cGlobalSettingsThemeTitle">Theme</ng-container>
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <div class="theme-settings-content">
                    <mat-button-toggle-group [formControl]="ctrlBrightnessMode" (change)="onBrightnessModeCtrlChange()">
                        <mat-button-toggle value="light"
                            i18n="@@cGlobalSettingsThemeLightLabel">Light</mat-button-toggle>
                        <mat-button-toggle value="dark" i18n="@@cGlobalSettingsThemeDarkLabel">Dark</mat-button-toggle>
                        <mat-button-toggle value="system" i18n="@@cGlobalSettingsThemeSystemSettingLabel">System
                            setting</mat-button-toggle>
                    </mat-button-toggle-group>
                </div>
            </mat-expansion-panel>

            <mat-expansion-panel (click)="gotoComponent('tomte-gui')" hideToggle>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        <mat-icon>
                            <svg viewBox="0 0 512 512">
                                <use href="./assets/images/icon_tomte.svg#Icon"></use>
                            </svg>
                        </mat-icon>
                        <ng-container i18n="@@cGlobalSettingsTomteTitle">Tomte</ng-container>
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <div class="content">
                </div>
            </mat-expansion-panel>

            <mat-expansion-panel [expanded]="expandPrimeSelect"
                *ngIf="availability.isIGpuAvailable() && availability.isDGpuAvailable() && primeState != 'off' && primeState != '-1'">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        <mat-icon>
                            <svg viewBox="0 0 512 512">
                                <use href="./assets/images/icon_gpu.svg#Icon"></use>
                            </svg>
                        </mat-icon>
                        <div i18n="@@cGlobalSettingsPrimeSelectTitle">Graphics switching (requires PC
                            restart)
                        </div>
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <div class="content">
                    <app-prime-select></app-prime-select>
                </div>
            </mat-expansion-panel>
        </mat-accordion>

    </div>
</div>